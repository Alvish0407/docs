"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[781],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>b});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),u=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},p=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,s=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=u(a),m=n,b=d["".concat(s,".").concat(m)]||d[m]||c[m]||o;return a?r.createElement(b,l(l({ref:t},p),{},{components:a})):r.createElement(b,l({ref:t},p))}));function b(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,l=new Array(o);l[0]=m;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[d]="string"==typeof e?e:n,l[1]=i;for(var u=2;u<o;u++)l[u]=a[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,a)}m.displayName="MDXCreateElement"},5162:(e,t,a)=>{a.d(t,{Z:()=>l});var r=a(7294),n=a(6010);const o={tabItem:"tabItem_Ymn6"};function l(e){let{children:t,hidden:a,className:l}=e;return r.createElement("div",{role:"tabpanel",className:(0,n.Z)(o.tabItem,l),hidden:a},t)}},4866:(e,t,a)=>{a.d(t,{Z:()=>w});var r=a(7462),n=a(7294),o=a(6010),l=a(2466),i=a(6550),s=a(1980),u=a(7392),p=a(12);function d(e){return function(e){return n.Children.map(e,(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}(e).map((e=>{let{props:{value:t,label:a,attributes:r,default:n}}=e;return{value:t,label:a,attributes:r,default:n}}))}function c(e){const{values:t,children:a}=e;return(0,n.useMemo)((()=>{const e=t??d(a);return function(e){const t=(0,u.l)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,a])}function m(e){let{value:t,tabValues:a}=e;return a.some((e=>e.value===t))}function b(e){let{queryString:t=!1,groupId:a}=e;const r=(0,i.k6)(),o=function(e){let{queryString:t=!1,groupId:a}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:t,groupId:a});return[(0,s._X)(o),(0,n.useCallback)((e=>{if(!o)return;const t=new URLSearchParams(r.location.search);t.set(o,e),r.replace({...r.location,search:t.toString()})}),[o,r])]}function h(e){const{defaultValue:t,queryString:a=!1,groupId:r}=e,o=c(e),[l,i]=(0,n.useState)((()=>function(e){let{defaultValue:t,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:a}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${a.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=a.find((e=>e.default))??a[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:o}))),[s,u]=b({queryString:a,groupId:r}),[d,h]=function(e){let{groupId:t}=e;const a=function(e){return e?`docusaurus.tab.${e}`:null}(t),[r,o]=(0,p.Nk)(a);return[r,(0,n.useCallback)((e=>{a&&o.set(e)}),[a,o])]}({groupId:r}),f=(()=>{const e=s??d;return m({value:e,tabValues:o})?e:null})();(0,n.useLayoutEffect)((()=>{f&&i(f)}),[f]);return{selectedValue:l,selectValue:(0,n.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),h(e)}),[u,h,o]),tabValues:o}}var f=a(2389);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:t,block:a,selectedValue:i,selectValue:s,tabValues:u}=e;const p=[],{blockElementScrollPositionUntilNextRender:d}=(0,l.o5)(),c=e=>{const t=e.currentTarget,a=p.indexOf(t),r=u[a].value;r!==i&&(d(t),s(r))},m=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=p.indexOf(e.currentTarget)+1;t=p[a]??p[0];break}case"ArrowLeft":{const a=p.indexOf(e.currentTarget)-1;t=p[a]??p[p.length-1];break}}t?.focus()};return n.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":a},t)},u.map((e=>{let{value:t,label:a,attributes:l}=e;return n.createElement("li",(0,r.Z)({role:"tab",tabIndex:i===t?0:-1,"aria-selected":i===t,key:t,ref:e=>p.push(e),onKeyDown:m,onClick:c},l,{className:(0,o.Z)("tabs__item",k.tabItem,l?.className,{"tabs__item--active":i===t})}),a??t)})))}function g(e){let{lazy:t,children:a,selectedValue:r}=e;const o=(Array.isArray(a)?a:[a]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===r));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return n.createElement("div",{className:"margin-top--md"},o.map(((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==r}))))}function v(e){const t=h(e);return n.createElement("div",{className:(0,o.Z)("tabs-container",k.tabList)},n.createElement(y,(0,r.Z)({},e,t)),n.createElement(g,(0,r.Z)({},e,t)))}function w(e){const t=(0,f.Z)();return n.createElement(v,(0,r.Z)({key:String(t)},e))}},2189:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>s,default:()=>b,frontMatter:()=>i,metadata:()=>u,toc:()=>d});var r=a(7462),n=(a(7294),a(3905)),o=a(4866),l=a(5162);const i={sidebar_position:2,title:"\ud83d\udce6 Release",description:"Learn how to publish a new app release to Shorebird."},s="Releases",u={unversionedId:"code_push/release",id:"code_push/release",title:"\ud83d\udce6 Release",description:"Learn how to publish a new app release to Shorebird.",source:"@site/docs/code_push/release.mdx",sourceDirName:"code_push",slug:"/code_push/release",permalink:"/code_push/release",draft:!1,editUrl:"https://github.com/shorebirdtech/docs/tree/main/docs/code_push/release.mdx",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"\ud83d\udce6 Release",description:"Learn how to publish a new app release to Shorebird."},sidebar:"tutorialSidebar",previous:{title:"\u2728 Initialize",permalink:"/code_push/initialize"},next:{title:"\ud83d\udc40 Preview",permalink:"/code_push/preview"}},p={},d=[{value:"Publish a Release",id:"publish-a-release",level:2},{value:"Manage Releases",id:"manage-releases",level:2},{value:"List Releases",id:"list-releases",level:3},{value:"Delete Releases",id:"delete-releases",level:3},{value:"\ud83d\udcf2 Side-loading and MDM",id:"-side-loading-and-mdm",level:2}],c={toc:d},m="wrapper";function b(e){let{components:t,...a}=e;return(0,n.kt)(m,(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"releases"},"Releases"),(0,n.kt)("h2",{id:"publish-a-release"},"Publish a Release"),(0,n.kt)("p",null,"In order to start pushing updates, you will need to create a release."),(0,n.kt)(o.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"release-android",label:"Android",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"shorebird release android"))),(0,n.kt)(l.Z,{value:"release-ios",label:"iOS (alpha)",mdxType:"TabItem"},(0,n.kt)("p",null,(0,n.kt)("inlineCode",{parentName:"p"},"shorebird release ios-alpha")))),(0,n.kt)("p",null,"Creating a release builds and submits your app to Shorebird. Shorebird saves the\ncompiled Dart code from your application in order to make updates smaller in\nsize."),(0,n.kt)("p",null,"Example output:"),(0,n.kt)(o.Z,{mdxType:"Tabs"},(0,n.kt)(l.Z,{value:"release-output-android",label:"Android",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"$ shorebird release android\n\u2713 Building release (9.6s)\n\u2713 Fetching apps (0.2s)\n\u2713 Detecting release version (0.2s)\n\u2713 Fetching releases (68ms)\n\n\ud83d\ude80 Ready to create a new release!\n\n\ud83d\udcf1 App: new_flutter_app (7a29188a-9363-426a-9a36-74a5e166373d)\n\ud83d\udce6 Release Version: 1.0.0+1\n\ud83d\udd79\ufe0f  Platform: android (arm64, arm32, x86_64)\n\nWould you like to continue? (y/N) Yes\n\u2713 Fetching Flutter revision (30ms)\n\u2713 Updating release status (67ms)\n\u2713 Creating artifacts (2.8s)\n\u2713 Updating release status (62ms)\n\n\u2705 Published Release!\n\nYour next step is to upload the app bundle to the Play Store.\nbuild/app/outputs/bundle/release/app-release.aab\n\nSee the following link for more information:\nhttps://support.google.com/googleplay/android-developer/answer/9859152?hl=en\n"))),(0,n.kt)(l.Z,{value:"release-output-ios",label:"iOS (alpha)",mdxType:"TabItem"},(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},'$ shorebird release ios-alpha\n\u2713 Fetching apps (0.2s)\n\u2713 Building release (59.0s)\n\u2713 Getting release version (40ms)\n\u2713 Fetching releases (0.1s)\n\ud83d\ude80 Ready to create a new release!\n\ud83d\udcf1 App: My App (7a29188a-9363-426a-9a36-74a5e166373d)\n\ud83d\udce6 Release Version: 1.0.0+1\n\ud83d\udd79\ufe0f  Platform: ios\n\nWould you like to continue? (y/N) Yes\n\u2713 Fetching Flutter revision (40ms)\n\u2713 Creating release (0.1s)\n\u2713 Creating artifacts (5.1s)\n\u2713 Updating release status (57ms)\n\n\u2705 Published Release!\n\nYour next step is to upload the ipa to App Store Connect.\nbuild/ios/ipa/new_flutter_app.ipa\n\nTo upload to the App Store either:\n    1. Drag and drop the "build/ios/ipa/new_flutter_app.ipa" bundle into the Apple Transporter macOS app (https://apps.apple.com/us/app/transporter/id1450874784)\n    2. Run xcrun altool --upload-app --type ios -f build/ios/ipa/new_flutter_app.ipa --apiKey your_api_key --apiIssuer your_issuer_id.\n       See "man altool" for details about how to authenticate with the App Store Connect API key.\n')))),(0,n.kt)("p",null,"If your application supports flavors or multiple release targets, you can specify the flavor and target using the ",(0,n.kt)("inlineCode",{parentName:"p"},"--flavor")," and ",(0,n.kt)("inlineCode",{parentName:"p"},"--target")," options:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"shorebird release --target ./lib/main_development.dart --flavor development\n")),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},(0,n.kt)("inlineCode",{parentName:"p"},"shorebird release")," wraps ",(0,n.kt)("inlineCode",{parentName:"p"},"flutter build")," and can take any argument\n",(0,n.kt)("inlineCode",{parentName:"p"},"flutter build")," can. To pass arguments to the underlying ",(0,n.kt)("inlineCode",{parentName:"p"},"flutter build")," you\nneed to put ",(0,n.kt)("inlineCode",{parentName:"p"},"flutter build")," arguments after a ",(0,n.kt)("inlineCode",{parentName:"p"},"--")," separator. For example:\n",(0,n.kt)("inlineCode",{parentName:"p"},'shorebird release android -- --dart-define="foo=bar"')," will define the ",(0,n.kt)("inlineCode",{parentName:"p"},'"foo"')," environment\nvariable inside Dart as you might have done with ",(0,n.kt)("inlineCode",{parentName:"p"},"flutter build")," directly.")),(0,n.kt)("p",null,"By default, ",(0,n.kt)("inlineCode",{parentName:"p"},"shorebird release android")," builds an AppBundle (",(0,n.kt)("inlineCode",{parentName:"p"},".aab"),").\nIf you would like to ",(0,n.kt)("em",{parentName:"p"},"also")," generate an Android Package Kit (",(0,n.kt)("inlineCode",{parentName:"p"},".apk"),"), use the\nfollowing command:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"shorebird release android --artifact apk\n")),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},"If you would like to disable prompts and publish a release without confirmation, you can use the ",(0,n.kt)("inlineCode",{parentName:"p"},"--force")," flag. This is especially useful when using ",(0,n.kt)("inlineCode",{parentName:"p"},"shorebird release android")," in a CI environment."),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre"},"shorebird release android --force\n")),(0,n.kt)("p",{parentName:"admonition"},"or"),(0,n.kt)("pre",{parentName:"admonition"},(0,n.kt)("code",{parentName:"pre"},"shorebird release ios-alpha --force\n"))),(0,n.kt)("h2",{id:"manage-releases"},"Manage Releases"),(0,n.kt)("h3",{id:"list-releases"},"List Releases"),(0,n.kt)("p",null,"You can view all of your releases for your current app (as defined by\nyour shorebird.yaml) on the ",(0,n.kt)("a",{parentName:"p",href:"https://console.shorebird.dev/"},"Shorebird console"),"."),(0,n.kt)("h3",{id:"delete-releases"},"Delete Releases"),(0,n.kt)("admonition",{type:"warning"},(0,n.kt)("p",{parentName:"admonition"},"Deleting a release will remove all associated patches and artifacts\nand is ",(0,n.kt)("strong",{parentName:"p"},"not reversible"),".")),(0,n.kt)("p",null,"You can delete a release for your current app (as defined by your\nshorebird.yaml) using ",(0,n.kt)("inlineCode",{parentName:"p"},"shorebird releases delete"),"."),(0,n.kt)("p",null,"Example output:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"$ shorebird releases delete --version 1.0.3+1\n\u2713 Fetched releases. (54ms)\nAre you sure you want to delete release 1.0.3+1? (y/N) Yes\n\u2713 Deleted release 1.0.3+1. (0.3s)\n")),(0,n.kt)("p",null,"If your application supports flavors, you can specify the flavor using the ",(0,n.kt)("inlineCode",{parentName:"p"},"--flavor")," option:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"shorebird releases delete --flavor development\n")),(0,n.kt)("h2",{id:"-side-loading-and-mdm"},"\ud83d\udcf2 Side-loading and MDM"),(0,n.kt)("p",null,"A common question we get asked, is does Shorebird require publishing to the\nApp Store or Play Store?"),(0,n.kt)("p",null,"No. Shorebird works fine with side-loading and mobile device management (MDM)\non Android. We've not had anyone try Shorebird with iOS Developer Enterprise\nprogram, but we expect it to work just as well."),(0,n.kt)("p",null,"To build Shorebird for distribution via APK (e.g. side-loading), use the\n",(0,n.kt)("inlineCode",{parentName:"p"},"--artifact")," flag with the ",(0,n.kt)("inlineCode",{parentName:"p"},"shorebird release")," command. For example:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-bash"},"shorebird release android --artifact=apk\n")),(0,n.kt)("p",null,"That will produce ",(0,n.kt)("em",{parentName:"p"},"both")," .apk and .aab files. You can distribute either\nor both as needed."))}b.isMDXComponent=!0}}]);